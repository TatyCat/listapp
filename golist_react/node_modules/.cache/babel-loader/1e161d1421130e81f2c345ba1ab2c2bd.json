{"ast":null,"code":"import _classCallCheck from \"/Users/luckytaty/Documents/sdg/u3/listapp/golist_react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/luckytaty/Documents/sdg/u3/listapp/golist_react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/luckytaty/Documents/sdg/u3/listapp/golist_react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/luckytaty/Documents/sdg/u3/listapp/golist_react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/luckytaty/Documents/sdg/u3/listapp/golist_react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/luckytaty/Documents/sdg/u3/listapp/golist_react/src/components/ToDoList.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport AddItemForm from './AddItemForm';\nimport ListItem from './ListItem';\n\nvar ToDoList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ToDoList, _Component);\n\n  function ToDoList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ToDoList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ToDoList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      newItemText: '',\n      todoList: [],\n      accessToken: 'xiii'\n    };\n\n    _this.getApiUrl = function () {\n      console.log();\n      return \"https://http://localhost:3000/lists\\n    \\n  }\";\n    };\n\n    _this.updateStateWithNewItem = function (event) {\n      _this.setState({\n        newItemText: event.target.value\n      });\n    };\n\n    _this.getListFromAPI = function () {\n      // go to the API\n      axios.get(_this.getApiUrl()).then(function (resp) {\n        // populate state with the todo list\n        _this.setState({\n          todoList: resp.data\n        });\n      });\n    };\n\n    _this.deleteItem = function (item) {\n      var url = \"https://one-list-api.herokuapp.com/items/\".concat(item.id, \"?access_token = \").concat(_this.state.accessToken, \" \");\n      axios.delete(url).then(function (resp) {\n        _this.getListFromAPI();\n      });\n    };\n\n    _this.addItemToApi = function (event) {\n      event.preventDefault();\n      axios.post(_this.getApiUrl(), {\n        item: {\n          text: _this.state.newItemText\n        }\n      }).then(function (resp) {\n        // get lateset list form API\n        _this.getListFromAPI(); // update state to clear out the input field\n\n\n        _this.setState({\n          newItemText: ''\n        });\n      });\n    };\n\n    _this.generateRandomToken = function () {\n      // creat a new string that is 20 random characters long\n      return Math.floor(Math.random() * Math.pow(10, 20)).toString();\n    };\n\n    _this.resetList = function () {\n      // reset the state\n      // reset toDoList\n      // reset the newItemText\n      // create new token\n      _this.setState({\n        todoList: [],\n        newItemText: '',\n        accessToken: _this.generateRandomToken()\n      }, function () {\n        console.log(_this.state.accessToken);\n\n        _this.getListFromAPI(); // store the new token in localstorage\n\n\n        localStorage.setItem('list-access-token', _this.state.accessToken);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ToDoList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.getListFromAPI(); // check local storage for a token\n\n      var token = localStorage.getItem('list-access-token');\n\n      if (token) {\n        this.setState({\n          accessToken: token\n        }, function () {\n          _this2.getListFromAPI();\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(React.Fragment, null, React.createElement(\"button\", {\n        onClick: this.resetList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"RESET LIST\"), React.createElement(AddItemForm, {\n        addItemToApi: this.addItemToApi,\n        newItemText: this.state.newItemText,\n        updateStateWithNewItem: this.updateStateWithNewItem,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"output\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(\"ol\", {\n        className: \"todo-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, this.state.todoList.map(function (item) {\n        return React.createElement(ListItem, {\n          key: item.id,\n          item: item,\n          deleteItem: _this3.deleteItem,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        });\n      })));\n    }\n  }]);\n\n  return ToDoList;\n}(Component);\n\nexport default ToDoList;","map":{"version":3,"sources":["/Users/luckytaty/Documents/sdg/u3/listapp/golist_react/src/components/ToDoList.js"],"names":["React","Component","axios","AddItemForm","ListItem","ToDoList","state","newItemText","todoList","accessToken","getApiUrl","console","log","updateStateWithNewItem","event","setState","target","value","getListFromAPI","get","then","resp","data","deleteItem","item","url","id","delete","addItemToApi","preventDefault","post","text","generateRandomToken","Math","floor","random","pow","toString","resetList","localStorage","setItem","token","getItem","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport AddItemForm from './AddItemForm'\nimport ListItem from './ListItem'\n\nclass ToDoList extends Component {\n  state = {\n    newItemText: '',\n    todoList: [],\n    accessToken: 'xiii'\n  }\n\n  getApiUrl = () => {\n    console.log()\n    return `https://http://localhost:3000/lists\n    \n  }`\n  }\n\n  // return `https://localhost:3001/lists?access_token=${\n  // this.state.accessToken\n  updateStateWithNewItem = event => {\n    this.setState({\n      newItemText: event.target.value\n    })\n  }\n\n  componentDidMount() {\n    this.getListFromAPI()\n    // check local storage for a token\n    const token = localStorage.getItem('list-access-token')\n    if (token) {\n      this.setState(\n        {\n          accessToken: token\n        },\n        () => {\n          this.getListFromAPI()\n        }\n      )\n    }\n  }\n\n  getListFromAPI = () => {\n    // go to the API\n    axios.get(this.getApiUrl()).then(resp => {\n      // populate state with the todo list\n      this.setState({\n        todoList: resp.data\n      })\n    })\n  }\n\n  deleteItem = item => {\n    const url = `https://one-list-api.herokuapp.com/items/${\n      item.id\n      }?access_token = ${this.state.accessToken} `\n    axios.delete(url).then(resp => {\n      this.getListFromAPI()\n    })\n  }\n\n  addItemToApi = event => {\n    event.preventDefault()\n    axios\n      .post(this.getApiUrl(), {\n        item: {\n          text: this.state.newItemText\n        }\n      })\n      .then(resp => {\n        // get lateset list form API\n        this.getListFromAPI()\n        // update state to clear out the input field\n        this.setState({\n          newItemText: ''\n        })\n      })\n  }\n\n  generateRandomToken = () => {\n    // creat a new string that is 20 random characters long\n    return Math.floor(Math.random() * Math.pow(10, 20)).toString()\n  }\n\n  resetList = () => {\n    // reset the state\n    // reset toDoList\n    // reset the newItemText\n    // create new token\n    this.setState(\n      {\n        todoList: [],\n        newItemText: '',\n        accessToken: this.generateRandomToken()\n      },\n      () => {\n        console.log(this.state.accessToken)\n        this.getListFromAPI()\n        // store the new token in localstorage\n        localStorage.setItem('list-access-token', this.state.accessToken)\n      }\n    )\n  }\n\n  render() {\n    return (\n      <>\n        <button onClick={this.resetList}>RESET LIST</button>\n        <AddItemForm\n          addItemToApi={this.addItemToApi}\n          newItemText={this.state.newItemText}\n          updateStateWithNewItem={this.updateStateWithNewItem}\n        />\n        <p className=\"output\" />\n        <ol className=\"todo-list\">\n          {this.state.todoList.map(item => {\n            return (\n              <ListItem\n                key={item.id}\n                item={item}\n                deleteItem={this.deleteItem}\n              />\n            )\n          })}\n        </ol>\n      </>\n    )\n  }\n}\n\nexport default ToDoList\n"]},"metadata":{},"sourceType":"module"}