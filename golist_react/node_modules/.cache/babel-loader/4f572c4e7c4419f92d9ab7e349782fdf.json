{"ast":null,"code":"import _classCallCheck from \"/Users/luckytaty/Documents/sdg/u3/listapp/golist_react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/luckytaty/Documents/sdg/u3/listapp/golist_react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/luckytaty/Documents/sdg/u3/listapp/golist_react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/luckytaty/Documents/sdg/u3/listapp/golist_react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/luckytaty/Documents/sdg/u3/listapp/golist_react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/luckytaty/Documents/sdg/u3/listapp/golist_react/src/components/ToDoList.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport AddItemForm from './AddItemForm';\nimport ListItem from './ListItem';\n\nvar ToDoList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ToDoList, _Component);\n\n  function ToDoList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ToDoList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ToDoList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      newTaskItem: '',\n      todoList: [],\n      accessToken: 'xiii'\n    };\n\n    _this.getApiUrl = function () {\n      return \"http://localhost:3000/lists?access_token=#{this.state.accessToken}\";\n    };\n\n    _this.updateStateWithNewItem = function (event) {\n      _this.setState({\n        newTaskItem: event.target.value\n      });\n    };\n\n    _this.getListFromAPI = function () {\n      // go to the API\n      axios.get(_this.getApiUrl()).then(function (resp) {\n        // populate state with the todo list\n        _this.setState({\n          todoList: resp.data\n        }); // console.log(this.state.todoList)\n\n      });\n    };\n\n    _this.markComplete = function (id, completion_status) {\n      var url = \"http://localhost:3000/lists/\".concat(id, \"?access_token=\").concat(_this.state.accessToken);\n      console.log(completion_status);\n\n      if (!completion_status) {\n        axios.patch(url, {\n          \"list\": {\n            \"complete\": true\n          }\n        }).then(function () {\n          return _this.getListFromAPI();\n        });\n      } else if (completion_status) {\n        axios.patch(url, {\n          \"list\": {\n            \"complete\": false\n          }\n        }).then(function () {\n          return _this.getListFromAPI();\n        });\n      }\n    };\n\n    _this.deleteItem = function (task) {\n      var url = \"http://localhost:3000/lists/\".concat(task, \"?access_token = \").concat(_this.state.accessToken, \" \");\n      axios.delete(url).then(function (resp) {\n        _this.getListFromAPI();\n      });\n    };\n\n    _this.addItemToApi = function (event) {\n      event.preventDefault();\n      axios.post(_this.getApiUrl(), {\n        \"list\": {\n          \"task\": _this.state.newTaskItem,\n          \"complete\": false,\n          \"token\": _this.state.accessToken\n        }\n      }).then(function (resp) {\n        // update state to clear out the input field\n        _this.setState({\n          newTaskItem: ''\n        }); // ***Gavin: Why did I have to add line 76 to clear the input box? Line 74 doens't clear out the input box like it's suppposed to. \n\n\n        document.getElementById(\"newItem\").value = \"\"; // get lateset list form API\n\n        _this.getListFromAPI();\n      });\n    };\n\n    _this.generateRandomToken = function () {\n      // creat a new string that is 20 random characters long\n      return Math.floor(Math.random() * Math.pow(10, 20)).toString();\n    };\n\n    _this.resetList = function () {\n      // reset the state\n      // reset toDoList\n      // reset the newTaskItem\n      // create new token\n      _this.setState({\n        todoList: [],\n        newTaskItem: '',\n        accessToken: _this.generateRandomToken()\n      }, function () {\n        console.log(_this.state.accessToken);\n\n        _this.getListFromAPI(); // store the new token in localstorage\n\n\n        localStorage.setItem('list-access-token', _this.state.accessToken);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ToDoList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.getListFromAPI(); // check local storage for a token\n\n      var token = localStorage.getItem('list-access-token');\n\n      if (token) {\n        this.setState({\n          accessToken: token\n        }, function () {\n          _this2.getListFromAPI();\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(React.Fragment, null, React.createElement(AddItemForm, {\n        addItemToApi: this.addItemToApi,\n        newTaskItem: this.state.newTaskItem,\n        updateStateWithNewItem: this.updateStateWithNewItem,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"output\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), React.createElement(\"ol\", {\n        className: \"todo-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, this.state.todoList.map(function (task_item) {\n        return React.createElement(ListItem, {\n          key: task_item.id,\n          id: task_item.id,\n          markComplete: _this3.markComplete,\n          task: task_item.task,\n          deleteItem: _this3.deleteItem,\n          complete: task_item.complete,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        });\n      })), React.createElement(\"button\", {\n        className: \"reset-button\",\n        onClick: this.resetList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"RESET LIST\"));\n    }\n  }]);\n\n  return ToDoList;\n}(Component);\n\nexport default ToDoList;","map":{"version":3,"sources":["/Users/luckytaty/Documents/sdg/u3/listapp/golist_react/src/components/ToDoList.js"],"names":["React","Component","axios","AddItemForm","ListItem","ToDoList","state","newTaskItem","todoList","accessToken","getApiUrl","updateStateWithNewItem","event","setState","target","value","getListFromAPI","get","then","resp","data","markComplete","id","completion_status","url","console","log","patch","deleteItem","task","delete","addItemToApi","preventDefault","post","document","getElementById","generateRandomToken","Math","floor","random","pow","toString","resetList","localStorage","setItem","token","getItem","map","task_item","complete"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport AddItemForm from './AddItemForm'\nimport ListItem from './ListItem'\n\nclass ToDoList extends Component {\n  state = {\n    newTaskItem: '',\n    todoList: [],\n    accessToken: 'xiii'\n  }\n\n  getApiUrl = () => {\n    return `http://localhost:3000/lists?access_token=#{this.state.accessToken}`\n  }\n\n  updateStateWithNewItem = event => {\n    this.setState({\n      newTaskItem: event.target.value\n    })\n  }\n\n  componentDidMount() {\n    this.getListFromAPI()\n    // check local storage for a token\n    const token = localStorage.getItem('list-access-token')\n    if (token) {\n      this.setState(\n        {\n          accessToken: token\n        },\n        () => {\n          this.getListFromAPI()\n        }\n      )\n    }\n  }\n\n  getListFromAPI = () => {\n    // go to the API\n    axios.get(this.getApiUrl())\n      .then(resp => {\n        // populate state with the todo list\n        this.setState({\n          todoList: resp.data\n        })\n        // console.log(this.state.todoList)\n      })\n  }\n\n  // localhost:3000/lists/38?access_token=xiii\n  markComplete = (id, completion_status) => {\n    const url = `http://localhost:3000/lists/${id}?access_token=${this.state.accessToken}`\n    console.log(completion_status)\n\n    if (!completion_status) {\n      axios.patch(\n        url,\n        {\n          \"list\": {\n            \"complete\": true\n          }\n        }\n      ).then(() =>\n        this.getListFromAPI()\n      )\n    }\n    else if (completion_status) {\n      axios.patch(\n        url,\n        {\n          \"list\": {\n            \"complete\": false\n          }\n        }\n      ).then(() =>\n        this.getListFromAPI()\n      )\n    }\n  }\n\n\n  // localhost:3000/lists/7?access_token=xiii\n  deleteItem = task => {\n    const url = `http://localhost:3000/lists/${task}?access_token = ${this.state.accessToken} `\n    axios.delete(url).then(resp => {\n      this.getListFromAPI()\n    })\n  }\n\n  addItemToApi = event => {\n    event.preventDefault()\n    axios\n      .post(this.getApiUrl(), {\n        \"list\": {\n          \"task\": this.state.newTaskItem,\n          \"complete\": false,\n          \"token\": this.state.accessToken\n        }\n      })\n      .then(resp => {\n        // update state to clear out the input field\n        this.setState({ newTaskItem: '' })\n        // ***Gavin: Why did I have to add line 76 to clear the input box? Line 74 doens't clear out the input box like it's suppposed to. \n        document.getElementById(\"newItem\").value = \"\";\n        // get lateset list form API\n        this.getListFromAPI()\n      })\n  }\n\n  generateRandomToken = () => {\n    // creat a new string that is 20 random characters long\n    return Math.floor(Math.random() * Math.pow(10, 20)).toString()\n  }\n\n  resetList = () => {\n    // reset the state\n    // reset toDoList\n    // reset the newTaskItem\n    // create new token\n\n    this.setState(\n      {\n        todoList: [],\n        newTaskItem: '',\n        accessToken: this.generateRandomToken()\n      },\n      () => {\n        console.log(this.state.accessToken)\n        this.getListFromAPI()\n        // store the new token in localstorage\n        localStorage.setItem('list-access-token', this.state.accessToken)\n      }\n    )\n  }\n\n  render() {\n    return (\n      <>\n        <AddItemForm\n          addItemToApi={this.addItemToApi}\n          newTaskItem={this.state.newTaskItem}\n          updateStateWithNewItem={this.updateStateWithNewItem}\n        />\n        <p className=\"output\" />\n        <ol className=\"todo-list\">\n          {this.state.todoList.map(task_item => {\n            return (\n              < ListItem\n                key={task_item.id}\n                id={task_item.id}\n                markComplete={this.markComplete}\n                task={task_item.task}\n                deleteItem={this.deleteItem}\n                complete={task_item.complete}\n              />\n            )\n          })}\n        </ol>\n\n        <button className=\"reset-button\" onClick={this.resetList}>RESET LIST</button>\n      </>\n    )\n  }\n}\n\nexport default ToDoList\n"]},"metadata":{},"sourceType":"module"}